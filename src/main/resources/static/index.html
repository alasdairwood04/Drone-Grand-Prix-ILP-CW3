<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drone Grand Prix</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="sidebar">
    <div class="sidebar-header">
        <h1>Drone Grand Prix <span class="badge">Live</span></h1>
        <div id="race-timer">00:00.00</div>
        <div id="race-status-text"><div class="status-dot" id="status-dot"></div> Ready to setup</div>
    </div>

    <div id="track-modal">
        <div class="modal-header">Select a Track <span class="close-btn" onclick="toggleTrackModal()">Ã—</span></div>
        <div class="track-list" id="track-list-content">
            <div style="padding:10px; text-align:center; color:#999;">Loading...</div>
        </div>
    </div>

    <div class="section-title">Controls</div>
    <div class="controls-grid">
        <button class="btn-primary" onclick="prepareRace()">Start Race</button>

        <button onclick="clearMap()">Reset</button>

        <button onclick="toggleTrackModal()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px"><path d="M9 18l6-6-6-6"/></svg>
            Load Track
        </button>

        <input type="file" id="track-upload" accept="image/*" style="display:none" onchange="uploadTrack(this)">
        <button onclick="document.getElementById('track-upload').click()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
            Upload Img
        </button>
    </div>

    <div class="section-title">Leaderboard</div>
    <div class="leaderboard-container" id="leaderboard-body">
        <div style="padding: 10px 0; color: #999; font-size: 13px; text-align: center; font-style: italic;">
            Waiting for racers...
        </div>
    </div>

    <div class="leaderboard-container" id="leaderboard-body">
        <div style="padding: 10px 0; color: #999; font-size: 13px; text-align: center; font-style: italic;">
            Waiting for racers...
        </div>
    </div>

    <div class="section-title" id="analysis-title" style="display:none; margin-top: 15px; border-top: 1px solid #eee; padding-top: 15px;">
        Race Analysis
        <span style="font-size: 10px; color: #999; font-weight: normal; margin-left: auto;">Select to view paths</span>
    </div>
    <div id="path-controls" style="display:none; flex-direction: column; gap: 8px; margin-bottom: 10px;">
    </div>

    <div class="section-title" style="margin-top: auto;">Commentary Feed</div>

    <div class="section-title" style="margin-top: auto;">Commentary Feed</div>
    <div id="commentary-box">
        <div class="comm-entry">
            <span class="comm-time">SYS</span>
            <span class="comm-text">System initialized. Select a track to begin.</span>
        </div>
    </div>
</div>

<div id="map"></div>
<div id="countdown-overlay">3</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>

<script src="script.js"></script>

</body>
</html>